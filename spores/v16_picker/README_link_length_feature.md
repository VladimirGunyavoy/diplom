# Функциональность укорачивания линков при изменении dt

## Описание
Реализована система автоматического укорачивания линков при уменьшении временного шага (dt). Линки визуально укорачиваются до "усеченной" точки на прямой между родительской и дочерней спорами, а не просто меняют толщину.

## Изменения

### 1. src/visual/link.py
- **Добавлен параметр `max_length`** в конструктор `Link.__init__()`
- **Добавлен сеттер `set_max_length()`** для установки максимальной длины
- **Полностью переписан метод `update_geometry()`** с поддержкой ограничения длины

### 2. src/managers/dt_manager.py
- **Добавлен параметр `link_length_per_dt`** для масштабирования длины линка от dt
- **Добавлен метод `get_max_link_length()`** для вычисления максимальной длины
- **Добавлен приватный метод `_notify_dt_changed()`** - колбэк при изменении dt
- **Добавлены вызовы `_notify_dt_changed()`** во все методы изменения dt:
  - `increase_dt()`
  - `decrease_dt()`
  - `reset_dt()`
  - `set_dt()`

### 3. src/managers/spore_manager.py
- **Добавлен метод `update_links_max_length()`** для обновления всех линков

### 4. config/json/config.json
- **Добавлена секция `link`** с параметрами:
  - `show: true` - показывать линки
  - `thickness: 0.4` - толщина линков
  - `distance_per_dt: 3.0` - коэффициент масштабирования длины от dt

## Как это работает

1. **При изменении dt** (Ctrl + колесо мыши) DTManager автоматически вызывает `_notify_dt_changed()`
2. **Колбэк вычисляет новую максимальную длину**: `current_dt * link_length_per_dt`
3. **SporeManager получает уведомление** и вызывает `update_links_max_length()` для всех линков
4. **Каждый линк обновляет свою геометрию** с учетом нового ограничения длины

## Результат
- При уменьшении dt линки визуально укорачиваются
- При увеличении dt линки удлиняются до исходной длины
- Линки всегда указывают в правильном направлении к "усеченной" цели
- Система работает автоматически без дополнительных действий пользователя

## Тестирование
Создан тест `test_link_length.py`, который проверяет:
- Создание DTManager с правильными параметрами
- Связывание менеджеров
- Создание тестовых линков
- Изменение dt и проверка укорачивания линков
- Работу метода `update_links_max_length()`

## Конфигурация
Параметр `distance_per_dt` в конфигурации можно настроить под конкретную сцену:
- Большие значения = линки длиннее при том же dt
- Меньшие значения = линки короче при том же dt
- Значение 3.0 подобрано для текущей сцены
