# Система управления цветами

Этот проект теперь использует централизованную систему управления цветами через JSON файл.

## Файлы системы

- `colors.json` - основной файл с цветами в формате RGBA
- `src/color_manager.py` - менеджер для загрузки и управления цветами

## Структура colors.json

```json
{
  "frame": {
    "origin": [1.0, 1.0, 1.0, 1.0],
    "x_axis": [0.863, 0.196, 0.184, 1.0],
    "y_axis": [0.2, 0.7, 0.25, 1.0],
    "z_axis": [0.149, 0.545, 0.824, 1.0]
  },
  "scene": {
    "floor": [0.3, 0.3, 0.4, 0.5],
    "window_background": [0.08, 0.1, 0.2, 1.0],
    "ambient_light": [0.6, 0.6, 0.65, 1.0],
    "directional_light": [1.0, 1.0, 1.0, 1.0]
  },
  "spore": {
    "default": [0.6, 0.4, 0.9, 1.0],
    "ghost": [1.0, 1.0, 1.0, 0.47]
  },
  "link": {
    "default": [0.78, 0.78, 0.78, 0.59]
  },
  "ui": {
    "text_primary": [1.0, 1.0, 1.0, 1.0],
    "text_secondary": [1.0, 1.0, 1.0, 0.7],
    "background_transparent": [0.0, 0.0, 0.0, 0.7],
    "background_solid": [0.0, 0.0, 0.0, 1.0]
  }
}
```

## Формат цветов

Все цвета задаются в формате RGBA, где:
- R (Red) - красный канал [0.0 - 1.0]
- G (Green) - зеленый канал [0.0 - 1.0]
- B (Blue) - синий канал [0.0 - 1.0]
- A (Alpha) - канал прозрачности [0.0 - 1.0]

## Категории объектов

### frame
Координатные оси и точки отсчета:
- `origin` - центральная точка
- `x_axis` - ось X (красная)
- `y_axis` - ось Y (зеленая)
- `z_axis` - ось Z (синяя)

### scene
Элементы сцены:
- `floor` - пол
- `window_background` - фон окна
- `ambient_light` - окружающий свет
- `directional_light` - направленный свет

### spore
Споры:
- `default` - обычные споры
- `ghost` - призрачная спора (предварительный просмотр)

### link
Связи между спорами:
- `default` - стандартные связи

### ui
Элементы пользовательского интерфейса:
- `text_primary` - основной текст
- `text_secondary` - вторичный текст
- `background_transparent` - полупрозрачный фон
- `background_solid` - сплошной фон

## Добавление новых цветов

Чтобы добавить новый цвет:

1. Откройте `colors.json`
2. Найдите соответствующую категорию или создайте новую
3. Добавьте новый цвет в формате `"название": [R, G, B, A]`
4. Сохраните файл

Пример добавления нового цвета для спор:
```json
"spore": {
  "default": [0.6, 0.4, 0.9, 1.0],
  "ghost": [1.0, 1.0, 1.0, 0.47],
  "special": [1.0, 0.5, 0.0, 0.8]
}
```

## Использование в коде

```python
# Получение цвета через ColorManager
color_manager = ColorManager()
color = color_manager.get_color('spore', 'default')

# Получение RGBA значений
rgba = color_manager.get_rgba('spore', 'default')

# Установка нового цвета программно
color_manager.set_color('spore', 'new_color', [1.0, 0.0, 0.0, 1.0])

# Перезагрузка цветов из файла
color_manager.reload_colors()

# Сохранение текущих цветов в файл
color_manager.save_colors()
```

## Преимущества системы

1. **Централизованное управление** - все цвета в одном месте
2. **Легкое редактирование** - простой JSON формат
3. **Поддержка прозрачности** - через альфа-канал
4. **Программное управление** - возможность изменения цветов в коде
5. **Автоматическая загрузка** - цвета применяются при запуске приложения
6. **Резервные цвета** - в случае ошибок используются цвета по умолчанию 